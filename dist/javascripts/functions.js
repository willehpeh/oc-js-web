"use strict";var hashRequestSequence=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,s,r,a,u,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 0<results.childElementCount&&(results.innerHTML=""),(t=document.createElement("h2")).textContent="Original value: "+hashInput.value,results.appendChild(t),n={secret:hashInput.value},e.prev=5,e.next=8,postRequest(apiBaseUrl+"create-hash",n);case 8:return s=e.sent,(r=document.createElement("p")).textContent="Hash: "+s.hash,results.appendChild(r),n={plain:hashInput.value,hash:s.hash},e.prev=13,e.next=16,postRequest(apiBaseUrl+"check-hash",n);case 16:a=e.sent,(u=document.createElement("img")).setAttribute("src",a.url),u.style.maxWidth="100%",results.appendChild(u),e.next=28;break;case 23:e.prev=23,e.t0=e.catch(13),(o=document.createElement("h2")).textContent="The server responded with: "+e.t0.message+" ("+e.t0.status+")!",results.appendChild(o);case 28:e.next=35;break;case 30:e.prev=30,e.t1=e.catch(5),(c=document.createElement("h2")).textContent="The server responded with: "+e.t1.message+" ("+e.t1.status+")!",results.appendChild(c);case 35:case"end":return e.stop()}},e,this,[[5,30],[13,23]])}));return function(){return e.apply(this,arguments)}}();function _asyncToGenerator(e){return function(){var o=e.apply(this,arguments);return new Promise(function(a,u){return function t(e,n){try{var s=o[e](n),r=s.value}catch(e){return void u(e)}if(!s.done)return Promise.resolve(r).then(function(e){t("next",e)},function(e){t("throw",e)});a(r)}("next")})}}var hashForm=document.getElementById("hash-form"),hashInput=document.getElementById("secret"),results=document.getElementById("results"),apiBaseUrl="http://localhost:3000/";function postRequest(s,r){return new Promise(function(e,t){var n=new XMLHttpRequest;n.open("POST",s),n.onreadystatechange=function(){4===n.readyState&&(200===n.status?e(JSON.parse(n.response)):t({status:n.status,message:n.response?JSON.parse(n.response).message:""}))},n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(r))})}hashForm.addEventListener("submit",function(e){e.preventDefault(),hashRequestSequence()});